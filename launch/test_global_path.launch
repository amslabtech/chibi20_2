<?xml version="1.0"?>
<launch>
    <node name="roomba_500driver_meiji" pkg="roomba_500driver_meiji" type="main500" output="screen">
        <param name="serial_port" value="/dev/ttyUSB0"/>
        <param name="publish_intensity" value="true"/>
        <param name="publish_multiecho" value="false"/>
    </node>

    <node name="urg_node" pkg="urg_node" type="urg_node" output="screen">
        <param name="serial_port" value="/dev/ttyACM0"/>
        <param name="frame_id" value="laser"/>
        <param name="publish_intensity" value="true"/>
        <param name="publish_multiecho" value="false"/>
    </node>
    <arg name="map_file" default="$(find chibi20_2)/mapdata/chibi20_2_dkan7.yaml"/>

    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find chibi20_2)/config/simulate.rviz"/>

    <node pkg="rviz" type="rviz" name="rviz2" args="-d $(find chibi20_2)/config/simulate2.rviz"/>

    <node pkg="map_server" type="map_server" name="global_map"  args="$(arg map_file)"/>

    <node pkg="chibi20_2" type="global_path_planner" name="global_path_planner" output="screen"/>

    <node pkg="chibi20_2" type="map_maneger" name="map_maneger" output="screen"/>

    <node pkg="chibi20_2" type="localizer" name="localizer" output="screen">
        <rosparam file="$(find chibi20_2)/config/param/localizer.yaml" command="load" />
    </node>

    <node pkg="chibi20_2" type="local_goal_creator" name="local_goal_creator" output="screen"/>

    <node pkg="chibi20_2" type="local_map_creator" name="local_map_creator" output="screen"/>

    <node pkg="chibi20_2" type="local_path_planner" name="local_path_planner" output="screen">
        <param name="hz" value="10" type="int"/>
        <param name="max_linear_velocity" value="0.5" type="double"/>
        <param name="max_angular_velocity" value="0.5236" type="double"/>
        <param name="max_linear_acceleration" value="0.05" type="double"/>
        <param name="max_angular_acceleration" value="0.5236" type="double"/>
        <param name="dx" value="0.05" type="double"/>
        <param name="da" value="0.0872665" type="double"/>
        <param name="dt" value="0.50" type="double"/>
        <param name="sim_time" value="6.0" type="double"/>
        <param name="sigma_velocity" value="1.5" type="double"/>
        <param name="sigma_angular" value="2.4" type="double"/>
        <param name="k_heading" value="1.25" type="double"/>
        <param name="k_distance" value="1.4" type="double"/>
        <param name="k_velocity" value="1.0" type="double"/>
        <param name="pick_up_time" value="4.0" type="double"/>
        <param name="search_range_time" value="6.0" type="double"/>
    </node>


</launch>
